<!DOCTYPE html>
<html>
<<template "_head.html">>

<el-main style="background-color: #F5F5F5;">

		    	<el-row :gutter="20" style="margin-bottom: 8px;">
				  <el-col :span="24"><div class="grid-content host_table">
				  		<h4> > 服务器列表</h4>
				  		<template>
						  <el-table
						    :data="tableData"
						    :row-class-name="tableRowClassName"
						    height="84%"
						    border
						    stripe
						    style="width: 100%">
						    <el-table-column prop="host_name" label="Name" width="180"></el-table-column>
						    <el-table-column prop="host_ip" label="TCP通讯地址" width="180"></el-table-column>
						    <el-table-column prop="sys_type" label="平台"></el-table-column>
							  <el-table-column prop="sys_architecture" label="架构"></el-table-column>
							  <el-table-column prop="slve_version" label="客户端版本"></el-table-column>
							  <el-table-column prop="conn_time" label="连接时间"></el-table-column>
							  <el-table-column prop="cpu_core_number" label="cpu"></el-table-column>
						    <!--cpu  mem  -->
						     <el-table-column fixed="right" label="操作" width="200">
						      <template slot-scope="scope">
						        <el-button @click="handleClick(scope.row)" type="text" size="small">详情</el-button>
						        <el-button type="text" size="small">已读</el-button>
						        <el-button type="text" size="small">监控</el-button>
						        <el-button type="text" size="small">通知</el-button>
						      </template>
						    </el-table-column>
						  </el-table>
						</template>

				  </div></el-col>
				</el-row>
				

		    </el-main>

		 <!--  <el-footer style="background-color: #000; " >aas</el-footer> -->
		</el-container>

	</div>

</body>


<script type="text/javascript">
let url = window.location.pathname;
new Vue({
	el:"#app",
	data:function(){
		return {
			menu:Enum(url),
			tableData: []
		}

	},
	methods:{
		handleSelect(key, keyPath) {
        	console.log(key, keyPath);
      	},
      	handleOpen(key, keyPath) {
	        console.log(key, keyPath);
	        window.location.href=keyPath;
	    },
	    handleClose(key, keyPath) {
	        console.log(key, keyPath);
	    },
		tableRowClassName({row, rowIndex}) {
			if (row.type === 1) {
			  return 'warning-row';
			} else if (row.type === 3) {
			  return 'success-row';
			}
			return '';
      	},
      	handleClick(row) {
        	console.log(row);
		},
		getlist: function(){
			let _this = this;
			$.ajax({
				type:'get',
				url:'/api/slve/v1/list',
				dataType:'json',
				contentType: "application/json",
				async:false,
				success:function (json){
					_this.tableData = json.slves;
				},
				error:function (){
					//弹错误框
					console.log("请求失败");
				}
			});
		}
	},
	mounted:function(){
		this.getlist();
	}
})
</script>

</html>